<% content_for :title, t('titles.new', :model => Product.human_name) %>

<% form_for(@product, :html => {:id => 'styled-form'}) do |f| %>

  <div id="field-set">
    <h3><span><%= t('titles.new', :model => Product.human_name)%></span></h3>
    <p>
      <%= f.label :name, Product.human_attribute_name(:name) %><br />
      <%= f.text_field :name %>
    </p>
    <p>
      <%= f.label :description, Product.human_attribute_name(:description) %><br />
      <%= f.text_field :description %>
    </p>
  </div>

  <div id="content-wrapper">

    <% content_for :tab_link, tab_link("Product Presentations")-%>
    <% content_for :tab_body do %>
      <% tabbed_body 'Product Presentations' do %>
        <%= render :partial => 'products/products_table', :locals => {:product_presentations => @product.product_presentations} %>
      <% end -%>
    <% end -%>

    <% content_for :tab_link, tab_link("Ingredients")-%>
    <% content_for :tab_body do %>
      <% tabbed_body 'ingredients', false do %>
        <%= render(:partial => 'ingredients/add_ingredients', :locals => {:object_with_formulas => @product, :ingredients => @ingredients}) %>
      <% end -%>
    <% end -%>

    <%= render :partial => 'shared/tabbed_panel' -%>

    <div id="footer">
      <%= f.submit t('forms.create'), :class => 'big-button' %>
      <%= link_to t('forms.cancel'), products_path %>
    </div>

  </div>

<% end %>

<% content_for :javascript do -%>
  <%= javascript_include_tag "products" %>

  <script type="text/javascript" language="javascript" charset="utf-8">
    //<![CDATA[
    _(function () {
      var tabContainers = _('div.tabs > div.tab');

      _('div.tabs ul.tabNavigation a').click(function () {
        tabContainers.hide().filter(this.hash).show();

        _('div.tabs ul.tabNavigation a').removeClass('selected');
        _(this).addClass('selected');

        return false;
      }).filter(':first').click();
    });
    //]]>
  </script>
<% end -%>
